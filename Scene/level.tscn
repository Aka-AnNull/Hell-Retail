[gd_scene load_steps=53 format=3 uid="uid://bhkkxgqsmks02"]

[ext_resource type="Script" uid="uid://bjomty5twa62f" path="res://Script/level.gd" id="1_or6n4"]
[ext_resource type="Texture2D" uid="uid://dhhnfvhgb6j68" path="res://Sprite/BG/BG.png" id="2_3qma8"]
[ext_resource type="PackedScene" uid="uid://l1bhryukeiwu" path="res://Scene/player.tscn" id="2_jnrmd"]
[ext_resource type="PackedScene" uid="uid://twkkl6x53d4o" path="res://Scene/Fade_transition.tscn" id="2_tut6d"]
[ext_resource type="Texture2D" uid="uid://capkovydn2v7g" path="res://Sprite/shelf/What_7.png" id="3_ovno7"]
[ext_resource type="Script" uid="uid://ddvwicdjtcvm4" path="res://Script/spawner.gd" id="3_slp34"]
[ext_resource type="SpriteFrames" uid="uid://cp1ilsbuubrbc" path="res://Resorces/MinigameCoinFrames.tres" id="5_78rtw"]
[ext_resource type="FontFile" uid="uid://bjvinrnu5nnxa" path="res://Resorces/m5x7.ttf" id="6_3d31u"]
[ext_resource type="PackedScene" uid="uid://tws0wveogunt" path="res://Scene/Shelf.tscn" id="6_p7rx0"]
[ext_resource type="Texture2D" uid="uid://qrvq6cy48qkl" path="res://Sprite/shelf/Whatee_1.png" id="7_60ewi"]
[ext_resource type="Script" uid="uid://cqbffiaqbawns" path="res://Script/cashier_zone.gd" id="7_hdt71"]
[ext_resource type="PackedScene" uid="uid://cdcleupalwlhf" path="res://Scene/Ghost.tscn" id="7_iysjp"]
[ext_resource type="Texture2D" uid="uid://cmjyhgpg2gv6b" path="res://Sprite/shelf/Coin/Ecoin1.png" id="7_leq4y"]
[ext_resource type="Texture2D" uid="uid://dt3h8351u8rp5" path="res://Sprite/shelf/Coin/Ecoin2.png" id="8_17yhb"]
[ext_resource type="Texture2D" uid="uid://dyd0hauobix3p" path="res://Sprite/shelf/Whatee_2.png" id="8_k0fkb"]
[ext_resource type="Texture2D" uid="uid://boscf57ldhp56" path="res://Sprite/shelf/Whatee_4.png" id="8_sxkop"]
[ext_resource type="Texture2D" uid="uid://bxlulmhdyj4b5" path="res://Sprite/BG/pixelated-cave-entrance-s17m36l2wfzrfscb.png" id="9_3qma8"]
[ext_resource type="Texture2D" uid="uid://sm2h0l2keg4m" path="res://Sprite/shelf/Coin/Ecoin3.png" id="9_yq7uo"]
[ext_resource type="Texture2D" uid="uid://dyb8pgncyvlfj" path="res://Sprite/shelf/Sh3lf_1.png" id="10_7lp0r"]
[ext_resource type="Texture2D" uid="uid://c6f0517k8t2ne" path="res://Sprite/shelf/Coin/Ecoin4.png" id="10_efcd0"]
[ext_resource type="Texture2D" uid="uid://bsll1u0heymi7" path="res://Sprite/shelf/Whatee_3.png" id="10_ncqyi"]
[ext_resource type="Texture2D" uid="uid://wuijymxsi3bi" path="res://Sprite/shelf/Whatee_6.png" id="10_ovno7"]
[ext_resource type="Texture2D" uid="uid://souoqcu88ft8" path="res://Sprite/shelf/Sh3lf_2.png" id="11_btxmf"]
[ext_resource type="Texture2D" uid="uid://dxers6w81u71e" path="res://Sprite/shelf/Sh3lf_3.png" id="11_k0fkb"]
[ext_resource type="Texture2D" uid="uid://buawdqr54se7c" path="res://Sprite/shelf/Coin/Ecoin5.png" id="11_pkw38"]
[ext_resource type="Texture2D" uid="uid://bdrs30btf5oc6" path="res://Sprite/shelf/Coin/Ecoin6.png" id="12_4kkk5"]
[ext_resource type="Texture2D" uid="uid://q3ksa58jrlbx" path="res://Sprite/shelf/Whatee_5.png" id="12_f43hl"]
[ext_resource type="Texture2D" uid="uid://dvbk4k81wqsuf" path="res://Sprite/shelf/Whatee_7.png" id="13_gq3if"]
[ext_resource type="PackedScene" uid="uid://csch13p5msvkg" path="res://Scene/StockPile.tscn" id="13_pivpx"]
[ext_resource type="PackedScene" uid="uid://dt6myf7lkv4tw" path="res://Scene/UserInterface.tscn" id="14_55t6b"]
[ext_resource type="PackedScene" uid="uid://65lswhnnonmy" path="res://Scene/Shelf_Column.tscn" id="19_4vmw1"]
[ext_resource type="Texture2D" uid="uid://dv3pt8dshvd5f" path="res://Sprite/shelf/Shelf_9.png" id="20_bfbse"]
[ext_resource type="Texture2D" uid="uid://bop1k4rg86y5g" path="res://Sprite/shelf/Shelf_7.png" id="21_kktvl"]
[ext_resource type="PackedScene" uid="uid://bfrfq4235i5lq" path="res://Scene/zombie.tscn" id="21_kv3de"]
[ext_resource type="Texture2D" uid="uid://uadi7he8lgfp" path="res://Sprite/shelf/Shelf_8.png" id="22_qmh4s"]
[ext_resource type="PackedScene" uid="uid://cw1jl72t4c25t" path="res://Scene/Small_bird.tscn" id="26_bfbse"]
[ext_resource type="PackedScene" uid="uid://buxvexdgehd5" path="res://Scene/slime.tscn" id="27_kktvl"]
[ext_resource type="PackedScene" uid="uid://dvkwpn0vjwyoj" path="res://Scene/Reaper.tscn" id="28_qmh4s"]
[ext_resource type="PackedScene" uid="uid://s5qid0iqw0dl" path="res://Scene/Long_bird.tscn" id="29_ofkvw"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3qma8"]
size = Vector2(19, 431)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_60ewi"]
size = Vector2(377.5, 1055.0001)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_637vb"]
size = Vector2(242, 215)

[sub_resource type="AtlasTexture" id="AtlasTexture_bqm8m"]
atlas = ExtResource("7_leq4y")
region = Rect2(0, 0, 560, 300)

[sub_resource type="AtlasTexture" id="AtlasTexture_o6u1a"]
atlas = ExtResource("8_17yhb")
region = Rect2(0, 0, 560, 300)

[sub_resource type="AtlasTexture" id="AtlasTexture_r86c8"]
atlas = ExtResource("9_yq7uo")
region = Rect2(0, 0, 560, 300)

[sub_resource type="AtlasTexture" id="AtlasTexture_qim27"]
atlas = ExtResource("10_efcd0")
region = Rect2(0, 0, 560, 300)

[sub_resource type="AtlasTexture" id="AtlasTexture_76qe0"]
atlas = ExtResource("11_pkw38")
region = Rect2(0, 0, 560, 300)

[sub_resource type="AtlasTexture" id="AtlasTexture_h3fn6"]
atlas = ExtResource("12_4kkk5")
region = Rect2(0, 0, 560, 300)

[sub_resource type="SpriteFrames" id="SpriteFrames_ajkoj"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bqm8m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o6u1a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r86c8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qim27")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_76qe0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h3fn6")
}],
"loop": true,
"name": &"default",
"speed": 6.0
}]

[sub_resource type="LabelSettings" id="LabelSettings_55t6b"]
line_spacing = 0.0
font = ExtResource("6_3d31u")
font_size = 34
outline_size = 7
outline_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ofkvw"]
bg_color = Color(0.11858138, 0.11858139, 0.11858132, 1)
border_width_left = 10
border_width_top = 10
border_width_right = 10
border_width_bottom = 10
border_color = Color(0.9529412, 0.7254902, 0, 1)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_637vb"]
vertices = PackedVector2Array(1216.1797, 175.15625, 1217.9219, 685.8906, 1189.8125, 481.7578, 1189.6484, 466.64844, 1188.1406, 322.59375, 1189.3516, 652.7969, 1191, 594.1797, 1188.5, 682.9531, 1189.0313, 663.65625, 1185.3281, 175.39844, 1185.7031, 142.75781, 1216, 142.3125, 1183.75, 308.03906, 850.34375, 290.96094, 866.4375, 312.25, 849.46094, 301.64844, 1003.0078, 176.72656, 1003.02344, 177, 952.3125, 177, 952.89844, 137.42188, 900.53125, 479.8672, 904.3125, 644.1719, 885.65625, 643.60156, 883.77344, 479.0703, 888.10156, 463.29688, 558.0078, 144.39844, 546.5781, 144.60938, 547.4375, 114.07031, 953.2422, 115.67969, 556.6875, 658.15625, 556.3203, 633.5469, 559.1875, 633.6328, 582.3828, 634.40625, 1219.5469, 142.25781, 1220.4531, 175.13281, 1185.7266, 140.28125, 1216, 140.71094, 1012.8125, 145.28906, 1012.3203, 115.90625, 1001.1406, 115.86719, 954.7031, 19.523438, 997.7031, 18.46875, 577.03125, 144.09375, 562, 336.0078, 580.6094, 459.78906, 561, 382.4297, 579.64844, 477.92188, 848.4375, 314.3125, 845.3828, 302.8125, 905.46094, 463.85156, 848.4297, 314.3203)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(5, 6, 1), PackedInt32Array(5, 1, 7, 8), PackedInt32Array(0, 4, 9, 10, 11), PackedInt32Array(12, 9, 4), PackedInt32Array(13, 12, 4, 14, 15), PackedInt32Array(16, 17, 18, 19), PackedInt32Array(20, 21, 22, 23, 24), PackedInt32Array(25, 26, 27, 28), PackedInt32Array(8, 29, 30, 31, 32), PackedInt32Array(33, 34, 0, 11), PackedInt32Array(10, 35, 36, 11), PackedInt32Array(37, 10, 9, 16), PackedInt32Array(38, 37, 16, 19, 39), PackedInt32Array(21, 5, 8), PackedInt32Array(40, 41, 39, 28), PackedInt32Array(25, 28, 39, 19, 42), PackedInt32Array(43, 25, 42, 44), PackedInt32Array(31, 45, 43, 44, 46), PackedInt32Array(47, 48, 15, 14, 49), PackedInt32Array(24, 50, 47, 49, 20), PackedInt32Array(1, 6, 2), PackedInt32Array(3, 2, 20, 49), PackedInt32Array(44, 24, 23, 46), PackedInt32Array(31, 46, 32), PackedInt32Array(8, 32, 22, 21)])
outlines = Array[PackedVector2Array]([PackedVector2Array(935, 0, 1017, -2, 1024, 197, 932, 197), PackedVector2Array(964, 126, 1239, 122, 1241, 195, 967, 197), PackedVector2Array(1236, 121, 1238, 708, 1168, 701, 1171, 594, 1168.3413, 341.96472, 827, 331, 832, 270, 1164, 287, 1166, 120), PackedVector2Array(1228, 684, 537, 678, 536, 613, 1229, 634), PackedVector2Array(539, 662, 538, 144, 597, 141, 600.39136, 440.0069, 862, 443, 821, 289, 877, 273, 921, 444, 1224, 447, 1225, 502, 921, 500, 925, 674, 866, 673, 864, 499, 600, 498, 603, 670), PackedVector2Array(528, 94, 1032, 96, 1033, 156, 976.84503, 156.99683, 526, 165)])
agent_radius = 20.0

[node name="Level" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_or6n4")

[node name="BG" type="Sprite2D" parent="."]
z_index = -3
position = Vector2(587.49994, 462)
scale = Vector2(1.2804765, 1.5305785)
texture = ExtResource("2_3qma8")
metadata/_edit_lock_ = true

[node name="Map Border" type="StaticBody2D" parent="."]
position = Vector2(65, 45)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Map Border"]
position = Vector2(-65, -45)
polygon = PackedVector2Array(-93, -109, 1401, -111, 1403, 834, -106, 845, -103, 720, 1280, 720, 1280, 100, 0, 100, 0, 720, -102, 699)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map Border"]
position = Vector2(262, 459)
shape = SubResource("RectangleShape2D_3qma8")

[node name="Hitbox" type="CollisionShape2D" parent="Map Border"]
position = Vector2(419, 160)
scale = Vector2(0.19999996, 0.19999996)
shape = SubResource("RectangleShape2D_60ewi")

[node name="PixelatedCaveEntranceS17m36l2Wfzrfscb" type="Sprite2D" parent="."]
position = Vector2(982, 31.000004)
scale = Vector2(0.26647833, 0.30725622)
texture = ExtResource("9_3qma8")
metadata/_edit_lock_ = true

[node name="CashierZone" type="Area2D" parent="."]
z_index = -1
position = Vector2(506, 209.50002)
collision_layer = 7
collision_mask = 7
script = ExtResource("7_hdt71")
coin_frames = ExtResource("5_78rtw")
coin_scale_modifier = 0.2
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CashierZone"]
position = Vector2(-14, -3.5)
shape = SubResource("RectangleShape2D_637vb")

[node name="Sprite2D" type="Sprite2D" parent="CashierZone"]
z_index = -1
position = Vector2(-31, 1.4999847)
scale = Vector2(0.069843754, 0.069843754)
texture = ExtResource("3_ovno7")

[node name="WorkTimer" type="Timer" parent="CashierZone"]
wait_time = 2.0
one_shot = true

[node name="CoinEffect" type="AnimatedSprite2D" parent="CashierZone"]
position = Vector2(-1.9073486e-06, 0.4999842)
scale = Vector2(0.1, 0.1)
sprite_frames = SubResource("SpriteFrames_ajkoj")
frame_progress = 0.9241264
offset = Vector2(-220, -80)

[node name="PromptLabel" type="Label" parent="CashierZone"]
visible = false
z_index = 2
offset_left = -80.0
offset_top = -29.500015
offset_right = 44.0
offset_bottom = -1.5000153
text = "[E] interact"
label_settings = SubResource("LabelSettings_55t6b")

[node name="MinigameLayer" type="CanvasLayer" parent="CashierZone"]

[node name="Background" type="Panel" parent="CashierZone/MinigameLayer"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -400.0
offset_top = -250.0
offset_right = 400.0
offset_bottom = 250.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_ofkvw")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(-4, 12)
navigation_polygon = SubResource("NavigationPolygon_637vb")
navigation_layers = 3

[node name="DoorPosition" type="Marker2D" parent="."]
position = Vector2(977, 19)

[node name="Marker1" type="Marker2D" parent="."]
position = Vector2(975, 184)

[node name="Marker2" type="Marker2D" parent="."]
position = Vector2(1197, 208)

[node name="Puddle1" type="Marker2D" parent="."]
position = Vector2(560, 382)

[node name="Puddle2" type="Marker2D" parent="."]
position = Vector2(889, 522)

[node name="Puddle3" type="Marker2D" parent="."]
position = Vector2(558, 667)

[node name="Stock1" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(77, 142)
stock_image = ExtResource("8_sxkop")

[node name="Stock2" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(250, 142)
item_name = "Coke"
stock_image = ExtResource("7_60ewi")

[node name="Stock3" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(77, 252)
item_name = "Sprite"
stock_image = ExtResource("10_ovno7")

[node name="Stock4" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(77, 362)
item_name = "Pepsi"
stock_image = ExtResource("10_ncqyi")

[node name="Stock5" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(77, 472)
item_name = "Fanta"
stock_image = ExtResource("12_f43hl")

[node name="Stock6" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(77, 582)
item_name = "Est"
stock_image = ExtResource("13_gq3if")

[node name="Stock7" parent="." instance=ExtResource("13_pivpx")]
y_sort_enabled = true
position = Vector2(77, 692)
item_name = "Sarsi"
stock_image = ExtResource("8_k0fkb")

[node name="Shelf1" parent="." instance=ExtResource("6_p7rx0")]
y_sort_enabled = true
position = Vector2(750, 630)

[node name="Shelf2" parent="." instance=ExtResource("6_p7rx0")]
y_sort_enabled = true
position = Vector2(750, 460)
required_item = "Pepsi"
shelf_image = ExtResource("10_7lp0r")

[node name="Shelf3" parent="." instance=ExtResource("6_p7rx0")]
y_sort_enabled = true
position = Vector2(1030, 460)
required_item = "Sprite"
shelf_image = ExtResource("11_btxmf")

[node name="Shelf4" parent="." instance=ExtResource("6_p7rx0")]
y_sort_enabled = true
position = Vector2(1030, 630)
required_item = "Coke"
shelf_image = ExtResource("11_k0fkb")

[node name="Shelf5" parent="." instance=ExtResource("19_4vmw1")]
position = Vector2(1251, 361)
required_item = "Fanta"
shelf_image = ExtResource("20_bfbse")

[node name="Shelf6" parent="." instance=ExtResource("19_4vmw1")]
position = Vector2(1251, 541)
required_item = "Est"
shelf_image = ExtResource("21_kktvl")

[node name="Shelf7" parent="." instance=ExtResource("19_4vmw1")]
position = Vector2(1251, 721)
required_item = "Sarsi"
shelf_image = ExtResource("22_qmh4s")

[node name="Spawner" type="Node2D" parent="." groups=["Spawner"]]
position = Vector2(979, -18)
script = ExtResource("3_slp34")
ghost_scene = ExtResource("7_iysjp")
zombie_scene = ExtResource("21_kv3de")
small_bird_scene = ExtResource("26_bfbse")
slime_scene = ExtResource("27_kktvl")
reaper_scene = ExtResource("28_qmh4s")
long_bird_scene = ExtResource("29_ofkvw")

[node name="Timer" type="Timer" parent="Spawner"]

[node name="UI_Layer" type="CanvasLayer" parent="."]

[node name="HUD" parent="UI_Layer" instance=ExtResource("14_55t6b")]
offset_left = 612.0
offset_top = 8.0
offset_right = 652.0
offset_bottom = 48.0

[node name="Player" parent="." groups=["Player"] instance=ExtResource("2_jnrmd")]
y_sort_enabled = true
position = Vector2(929, 280)

[node name="Fade_transition" parent="." instance=ExtResource("2_tut6d")]
visible = false
z_index = 2
